# DOMI

[![MIT licensed][1]][2]

[1]: https://img.shields.io/badge/license-MIT-blue.svg
[2]: LICENSE

DOMI是个简单的开源的有状态服务网络库，借助etcd来实现一个小规模的集群。
应用场景为分组进行的实时互动，如聊天室，简单游戏。不支持复杂的事务及服务流转。

## 第三方库依赖

* github.com/coreos/etcd/clientv3

## 架构图

![png](/framework.png)

## 集群

### 服务注册与服务发现

使用etcd来实现服务注册与服务发现。

### 负载均衡

待实施。

### 故障处理及恢复

待实施。

### 熔断

待实施。

### 规模可扩展

可以根据性能的需求增减服务节点，集群最多支持1023个服务节点。

### 服务节点关闭

* ctrl+c，或者 kill 指定的服务节点，可以强制将相关的服务节点推出集群，服务节点会等待8秒后强制退出。

* 可以通过http关闭服务节点，停止新用户接入，等待所有用户连接关闭后自动退出。

## 样例

### 注册事件

```golang

```

## 事件

事件65500后的值为库保留，所有节点的事件值要一致，为了减少同步负担，事件编号直接硬编码到程序，事件一般采用递增方式，建议存在同一文件中。

## 版本

* 在etcd版本3.3.4上完成的测试。
* go版本需要1.9以上。

## 备注

* 仅支持64位。

## 联系

联系邮箱: s_w_wang@163.com
